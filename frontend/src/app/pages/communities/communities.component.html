<!-- HEADER + BOTÓN -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Comunidades registradas</h2>
  <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalNuevaComunidad">
    Añadir comunidad
  </button>
</div>

<!-- BUSCADOR -->
<div class="container py-4">
  <div class="mb-3">
    <input type="text" class="form-control" [(ngModel)]="filtro" placeholder="Buscar comunidad...">
  </div>

  <!-- TABLA -->
  <table class="table table-hover">
    <thead class="table-primary">
      <tr>
        <th>Dirección</th>
        <th>Código Postal</th>
        <th>Nº Propiedades</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let community of getFilteredCommunities()">
        <td>{{ community.address }}</td>
        <td>{{ community.postalCode }}</td>
        <td>{{ community.propertiesCount }}</td>
        <td>
          <button class="btn btn-sm btn-outline-info me-1" (click)="verComunidad(community.id)">Ver</button>
          <button class="btn btn-sm btn-outline-secondary">Editar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="selectedCommunity" class="card mt-4 p-3 shadow-sm">
  <h4>Detalles de la comunidad</h4>
  <p><strong>Dirección:</strong> {{ selectedCommunity.address }}</p>
  <p><strong>Código Postal:</strong> {{ selectedCommunity.postalCode }}</p>
  <p><strong>Ascensor:</strong> {{ selectedCommunity.elevator ? 'Sí' : 'No' }}</p>
  <p><strong>Nº Plantas:</strong> {{ selectedCommunity.numFloors }}</p>
  <p><strong>Parkings:</strong> {{ selectedCommunity.numparkings }}</p>
  <p><strong>Trasteros:</strong> {{ selectedCommunity.numStorageRooms }}</p>
  <p><strong>Acceso movilidad reducida:</strong> {{ selectedCommunity.reducedMobilityAccess ? 'Sí' : 'No' }}</p>
  <p><strong>Número de cuenta:</strong> {{ selectedCommunity.bankAccountNumber }}</p>

  <button class="btn btn-outline-primary mt-3" (click)="toggleProperties()">
    {{ showProperties ? 'Ocultar propiedades' : 'Ver propiedades' }}
  </button>

  <div *ngIf="showProperties" class="mt-3">
    <h5>Propiedades</h5>
    <p>(Aquí podrías listar las propiedades si las incluyes más adelante)</p>
  </div>
</div>


<!-- MODAL DE NUEVA COMUNIDAD (ESTÁ OCULTO HASTA QUE IMPLEMENTES CREAR) -->
<!-- <div class="modal fade" id="modalNuevaComunidad" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Nueva comunidad</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body">
        <form #formNuevaComunidad="ngForm" (ngSubmit)="crearComunidad()">

          <div class="mb-3">
            <label for="address" class="form-label">Dirección</label>
            <input type="text" id="address" name="address" class="form-control" [(ngModel)]="nueva.address" required>
          </div>

          <div class="mb-3">
            <label for="postalCode" class="form-label">Código Postal</label>
            <input type="text" id="postalCode" name="postalCode" class="form-control" [(ngModel)]="nueva.postalCode" required>
          </div>

          <div class="mb-3">
            <label for="propertiesCount" class="form-label">Nº Propiedades</label>
            <input type="number" id="propertiesCount" name="propertiesCount" class="form-control" [(ngModel)]="nueva.propertiesCount" required min="0">
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="formNuevaComunidad.invalid">Guardar</button>
        </form>
      </div>

    </div>
  </div>
</div> -->
